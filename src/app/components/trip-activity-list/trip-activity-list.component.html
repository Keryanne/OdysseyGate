<div class="main-container">
    <div class="toolbar animate-item" [@cardAnimation]>
      <h1>Mes activités</h1>
      <ion-button (click)="openSingleActivityForm()" class="icon-only-button">
        <ion-icon name="add" slot="icon-only"></ion-icon>
      </ion-button>
    </div>

    <div class="card-list" [@listAnimation]="animationState">
      @if(activities && activities.length === 0) {
        <p class="animate-item" [@cardAnimation]>Aucune activité trouvée.</p>
      } @else {
        @for (activity of activities; track activity.id) {
          <div class="card" [@cardAnimation]>
            <div class="card-content">
              <div class="card-header">
                <div class="card-row">
                  <ion-icon name="bicycle" style="font-size: 2rem;"></ion-icon>
                  
                  @if(activity.description) {
                    <h3>{{ activity.description }}</h3>
                  } @else {
                    <h3>Nom</h3>
                  }
                </div>
              </div>
              <div class="card-row">
                  @if(activity.lieu) {
                    <div class="icon-row">
                      <ion-icon name="location"></ion-icon>
                      <h4>{{ activity.lieu }}</h4>
                    </div>
                  } @else {
                    <div class="icon-row">
                      <ion-icon name="location"></ion-icon>
                      <h4>Lieu non spécifié</h4>
                    </div>
                  }
                </div>
            </div>
            <div class="card-actions">
              <ion-button fill="clear" class="icon-only-button large" (click)="editActivity(activity.id!)">
                <ion-icon name="pencil" class="icon" slot="icon-only"></ion-icon>
              </ion-button>
              <ion-button fill="clear" class="icon-only-button large" (click)="deleteActivity(activity.id!)">
                <ion-icon name="trash-bin" class="icon" slot="icon-only"></ion-icon>
              </ion-button>
            </div>
          </div>
        }
      }
    </div>
    
  <ion-modal [isOpen]="showSingleActivityForm" (ionModalDidDismiss)="handleAddActivityModal($event)">
    <ng-template>
      <ion-content class="ion-padding">
        <app-activity-form
          [mode]="'single'">
        </app-activity-form>
      </ion-content>
    </ng-template>
  </ion-modal>

  <ion-modal [isOpen]="showUpdateActivityForm" (ionModalDidDismiss)="handleUpdateActivityModal($event)">
    <ng-template>
      <ion-content class="ion-padding">
        <app-activity-form
          [mode]="'single'"
          [existingActivities]="selectedActivity"
          [isUpdate]="true">
        </app-activity-form>
      </ion-content>
    </ng-template>
  </ion-modal>
</div>
